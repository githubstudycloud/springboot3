-- 生成所有ALTER PROCEDURE和ALTER FUNCTION语句
SELECT CONCAT('ALTER ', ROUTINE_TYPE, ' `', ROUTINE_SCHEMA, '`.`', ROUTINE_NAME, '` SQL SECURITY INVOKER;') AS alter_statement
FROM information_schema.ROUTINES
WHERE ROUTINE_TYPE IN ('PROCEDURE', 'FUNCTION')
AND ROUTINE_SCHEMA NOT IN ('sys', 'information_schema', 'mysql', 'performance_schema')
ORDER BY ROUTINE_TYPE, ROUTINE_SCHEMA, ROUTINE_NAME;