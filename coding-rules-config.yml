# ğŸ›ï¸ å¹³å°ç¼–ç è§„èŒƒé…ç½®
platform:
  coding-rules:
    enabled: true
    excel-config:
      path: "classpath:coding-rules/coding-rules.xlsx"
      sheet-name: "ç¼–ç è§„èŒƒ"
      refresh-interval: 300000  # 5åˆ†é’Ÿåˆ·æ–°ä¸€æ¬¡
    
    # è§„åˆ™åˆ†ç±»
    categories:
      naming:
        enabled: true
        severity: ERROR
        rules:
          - rule-id: "N001"
            name: "ç±»åè§„èŒƒ"
            pattern: "^[A-Z][a-zA-Z0-9]*$"
            message: "ç±»åå¿…é¡»ä½¿ç”¨å¤§é©¼å³°å‘½åæ³•"
          - rule-id: "N002"
            name: "æ–¹æ³•åè§„èŒƒ"
            pattern: "^[a-z][a-zA-Z0-9]*$"
            message: "æ–¹æ³•åå¿…é¡»ä½¿ç”¨å°é©¼å³°å‘½åæ³•"
          - rule-id: "N003"
            name: "å¸¸é‡å‘½åè§„èŒƒ"
            pattern: "^[A-Z][A-Z0-9_]*$"
            message: "å¸¸é‡å¿…é¡»ä½¿ç”¨å¤§å†™å­—æ¯å’Œä¸‹åˆ’çº¿"
      
      architecture:
        enabled: true
        severity: WARN
        rules:
          - rule-id: "A001"
            name: "DDDé¢†åŸŸæ¨¡å‹è§„èŒƒ"
            description: "èšåˆæ ¹å¿…é¡»ç»§æ‰¿AggregateRoot"
            target-annotation: "@Entity"
            required-superclass: "AggregateRoot"
          - rule-id: "A002"
            name: "ä»“å‚¨æ¥å£è§„èŒƒ"
            description: "ä»“å‚¨æ¥å£å¿…é¡»ä»¥Repositoryç»“å°¾"
            target-pattern: ".*Repository$"
            package-pattern: ".*\\.domain\\..*"
          - rule-id: "A003"
            name: "åº”ç”¨æœåŠ¡è§„èŒƒ"
            description: "åº”ç”¨æœåŠ¡å¿…é¡»ä½¿ç”¨@ApplicationServiceæ³¨è§£"
            target-annotation: "@Service"
            required-annotation: "@ApplicationService"
      
      security:
        enabled: true
        severity: ERROR
        rules:
          - rule-id: "S001"
            name: "æ•æ„Ÿä¿¡æ¯å¤„ç†"
            description: "ä¸å…è®¸åœ¨æ—¥å¿—ä¸­è¾“å‡ºå¯†ç ç­‰æ•æ„Ÿä¿¡æ¯"
            forbidden-patterns:
              - "password"
              - "secret"
              - "token"
            log-methods:
              - "log.info"
              - "log.debug"
              - "log.error"
          - rule-id: "S002"
            name: "SQLæ³¨å…¥é˜²æŠ¤"
            description: "å¿…é¡»ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢"
            target-methods:
              - "createNativeQuery"
              - "createQuery"
            required-pattern: "\\?\\d+|:\\w+"
      
      performance:
        enabled: true
        severity: WARN
        rules:
          - rule-id: "P001"
            name: "å¾ªç¯æ€§èƒ½è§„èŒƒ"
            description: "é¿å…åœ¨å¾ªç¯ä¸­æ‰§è¡Œæ•°æ®åº“æ“ä½œ"
            target-patterns:
              - "for\\s*\\("
              - "while\\s*\\("
            forbidden-calls:
              - "repository.save"
              - "repository.find"
              - "jdbcTemplate.query"
          - rule-id: "P002"
            name: "é›†åˆåˆå§‹åŒ–è§„èŒƒ"
            description: "é›†åˆåˆå§‹åŒ–æ—¶åº”æŒ‡å®šå®¹é‡"
            target-classes:
              - "ArrayList"
              - "HashMap"
              - "HashSet"
            required-constructor-params: 1
      
      logging:
        enabled: true
        severity: INFO
        rules:
          - rule-id: "L001"
            name: "æ—¥å¿—çº§åˆ«è§„èŒƒ"
            description: "ä¸šåŠ¡é€»è¾‘ä½¿ç”¨infoï¼Œè°ƒè¯•ä¿¡æ¯ä½¿ç”¨debug"
            target-methods:
              - "log.info"
              - "log.debug"
              - "log.warn"
              - "log.error"
          - rule-id: "L002"
            name: "ç»“æ„åŒ–æ—¥å¿—è§„èŒƒ"
            description: "å…³é”®ä¸šåŠ¡æ“ä½œå¿…é¡»è®°å½•ç»“æ„åŒ–æ—¥å¿—"
            target-annotations:
              - "@UseCase"
              - "@DomainService"
            required-log-fields:
              - "operation"
              - "userId"
              - "timestamp"
    
    # æ£€æŸ¥é…ç½®
    check-config:
      # å®æ—¶æ£€æŸ¥
      real-time:
        enabled: true
        target-packages:
          - "com.platform.domain"
          - "com.platform.application"
          - "com.platform.adapter"
      
      # ç¼–è¯‘æ—¶æ£€æŸ¥
      compile-time:
        enabled: true
        fail-on-error: true
        report-format: "HTML"
        output-path: "target/coding-rules-report.html"
      
      # æ’é™¤è§„åˆ™
      exclusions:
        classes:
          - ".*Test$"
          - ".*TestCase$"
          - ".*Configuration$"
        packages:
          - "com.platform.test"
          - "com.platform.config"
        files:
          - "Application.java"
    
    # è‡ªåŠ¨ä¿®å¤
    auto-fix:
      enabled: false  # ç”Ÿäº§ç¯å¢ƒå…³é—­
      backup: true
      rules:
        - "N001"  # ç±»åè§„èŒƒ
        - "N002"  # æ–¹æ³•åè§„èŒƒ
        - "L001"  # æ—¥å¿—çº§åˆ«è§„èŒƒ
    
    # æŠ¥å‘Šé…ç½®
    reporting:
      enabled: true
      formats:
        - "HTML"
        - "JSON"
        - "XML"
      output-directory: "target/reports/coding-rules"
      include-source-code: true
      
      # è´¨é‡é—¨ç¦
      quality-gate:
        enabled: true
        max-errors: 0
        max-warnings: 10
        max-info: 50

# é›†æˆå¤–éƒ¨å·¥å…·
integrations:
  sonarqube:
    enabled: true
    server-url: "http://localhost:9000"
    project-key: "platform-project"
    
  checkstyle:
    enabled: true
    config-file: "checkstyle.xml"
    
  pmd:
    enabled: true
    ruleset: "pmd-ruleset.xml"
    
  spotbugs:
    enabled: true
    effort: "max"
    threshold: "low"

# é€šçŸ¥é…ç½®
notifications:
  enabled: true
  channels:
    email:
      enabled: true
      recipients:
        - "dev-team@company.com"
      smtp:
        host: "smtp.company.com"
        port: 587
    
    webhook:
      enabled: true
      url: "http://notification-service/api/coding-rules"
      
    slack:
      enabled: false
      channel: "#dev-alerts"
      webhook-url: "https://hooks.slack.com/services/..."

# æ€§èƒ½é…ç½®
performance:
  cache:
    enabled: true
    ttl: 3600  # 1å°æ—¶
    max-size: 1000
  
  async:
    enabled: true
    thread-pool-size: 4
  
  batch-processing:
    enabled: true
    batch-size: 100 